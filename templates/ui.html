<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat with ChattiBotti</title>
    <!-- Link Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!--CSS-->
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <div class="container-fluid">
        <div class="row justify-content-center mt-5">
            <h1 class="text-center">Chat with ChattiBotti</h1>
            <div id="chat-container" class="col-md-8"> 
                <div id="chat-container1"></div>
            </div>
        </div>
    </div>
    <form id="chat-form" class="fixed-bottom m-4">
        <input type="text" id="user-input" name="user_input" class="form-control mb-4 mt-4 col-mb-4" placeholder="Kirjoita viestisi tähän">
        <button type="submit" class="btn-lg btn-secondary mx-auto d-block">Send</button>
    </form>


    <!-- Link Bootstrap JS and Fetch API Polyfill for Older Browsers -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/whatwg-fetch@4.0.0/dist/fetch.umd.min.js"></script>

    <script>
        document.getElementById("chat-form").addEventListener("submit", function(event) {
            event.preventDefault();
            var userInput = document.getElementById("user-input").value;
    
            fetch("/get_response", {
                method: "POST",
                body: new URLSearchParams({
                    user_input: userInput
                }),
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                }
            })
            .then(response => response.text())
            .then(data => {
                var chatContainer = document.getElementById("chat-container");
                var chatbox = document.createElement("div");
                chatbox.classList.add("chatbox"); 
                chatbox.innerHTML = "<div id='chatbox3'><p>" + "You" + "</p></div><div id='chatbox1'><p>" + userInput + "</p></div><div id='chatbox4'><p>ChatBot " + "</p></div><div id='chatbox2'><p>" + data + "</p></div>";
                chatContainer.appendChild(chatbox);

                chatContainer.scrollTop = chatContainer.scrollHeight;
            })
            .catch(error => console.error("Error:", error));
        });
    </script>
    
</body>
</html>



